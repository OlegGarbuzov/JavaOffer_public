document.addEventListener("DOMContentLoaded",(function(){document.body.classList.add("theme-transition")
const t=()=>localStorage.getItem("theme")||"light",e=t=>{document.documentElement.setAttribute("data-bs-theme",t),document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t)
const e=document.getElementById("theme-switch")
e&&(e.checked="dark"===t)
const o=document.getElementById("theme-switch-mobile")
o&&(o.checked="dark"===t)
const n=document.getElementById("theme-switch-admin")
n&&(n.checked="dark"===t),"dark"===t?(document.body.classList.add("dark-theme"),document.documentElement.classList.add("dark-theme")):(document.body.classList.remove("dark-theme"),document.documentElement.classList.remove("dark-theme")),"dark"===t?(document.querySelectorAll(".card-header").forEach((t=>{t.removeAttribute("style"),t.style.backgroundColor="#2c3034",t.style.color="#fff",t.style.borderColor="#444"})),document.querySelectorAll(".table").forEach((t=>{t.style.color="#dee2e6",t.style.borderColor="#444"}))):document.querySelectorAll(".card-header").forEach((t=>{t.removeAttribute("style")}))
const a=new CustomEvent("themeChanged",{detail:{theme:t}})
document.dispatchEvent(a),document.querySelectorAll(".mode-block.mode-rating.disabled, .mobile-card.disabled#mobileCardRating").forEach((t=>{if(t.style.boxShadow="none !important",t.style.transform="scale(0.95) !important",t.style.zIndex="0 !important",t.style.border="none !important",t.style.outline="none !important",!t._hoverHandlerAdded){t.addEventListener("mouseenter",(function(){this.style.boxShadow="none !important",this.style.transform="scale(0.95) !important",this.style.zIndex="0 !important",this.style.border="none !important",this.style.outline="none !important"})),t.addEventListener("mouseleave",(function(){this.style.boxShadow="none !important",this.style.transform="scale(0.95) !important",this.style.zIndex="0 !important",this.style.border="none !important",this.style.outline="none !important"}))
const e=t.querySelector(".login-link")
e&&(e.addEventListener("mouseenter",(function(e){e.stopPropagation(),t.style.boxShadow="none !important",t.style.transform="scale(0.95) !important",t.style.zIndex="0 !important",t.style.border="none !important",t.style.outline="none !important"})),e.addEventListener("mouseleave",(function(e){e.stopPropagation(),t.style.boxShadow="none !important",t.style.transform="scale(0.95) !important",t.style.zIndex="0 !important",t.style.border="none !important",t.style.outline="none !important"}))),t._hoverHandlerAdded=!0}}))}
e(t())
const o=document.getElementById("theme-switch")
o&&o.addEventListener("change",(function(){const t=this.checked?"dark":"light"
e(t)}))
const n=document.getElementById("theme-switch-mobile")
n&&n.addEventListener("change",(function(){const t=this.checked?"dark":"light"
e(t)}))
const a=document.getElementById("theme-switch-admin")
a&&a.addEventListener("change",(function(){const t=this.checked?"dark":"light"
e(t)})),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(t=>{localStorage.getItem("theme")||e(t.matches?"dark":"light")})),window.addEventListener("load",(function(){e(t()),"dark"===t()&&document.querySelectorAll(".card-header, .card, .table, .table-striped tbody tr, .table th, .table td").forEach((t=>{t.classList.contains("theme-checked")||t.classList.add("theme-checked")}))
const o=()=>{document.querySelectorAll(".modal-backdrop").forEach((t=>{t.style.cssText="opacity: 0.5 !important; background-color: #000 !important;"})),document.querySelectorAll(".modal").forEach((e=>{if(e.classList.contains("rating-rules-modal")||e.querySelector(".rating-rules-modal")){const o=e.querySelector(".modal-content")
o&&("dark"===t()?o.style.cssText="background-color: #212529 !important; color: #fff !important; opacity: 1 !important;":o.style.cssText="background-color: #fff !important; color: #212529 !important; opacity: 1 !important;")}}))}
o(),document.addEventListener("themeChanged",(function(){setTimeout(o,0),setTimeout(o,50),setTimeout(o,150),setTimeout(o,300)})),document.querySelectorAll('[data-bs-toggle="modal"]').forEach((t=>{t.addEventListener("click",(function(){setTimeout(o,0),setTimeout(o,50),setTimeout(o,150),setTimeout(o,300)}))})),new MutationObserver((function(t){t.forEach((function(t){t.addedNodes&&t.addedNodes.length>0&&t.addedNodes.forEach((function(t){1===t.nodeType&&t.classList&&(t.classList.contains("modal")||t.classList.contains("modal-backdrop"))&&setTimeout(o,50)}))}))})).observe(document.body,{childList:!0,subtree:!0}),document.body.addEventListener("shown.bs.modal",(function(){setTimeout(o,0),setTimeout(o,50),setTimeout(o,150),setTimeout(o,300)})),document.addEventListener("themeChanged",(function(){setTimeout((function(){const e=document.querySelectorAll(".modal-backdrop")
e.length>0&&e.forEach((t=>{t.style.cssText="opacity: 0.5 !important; background-color: #000 !important;"})),document.querySelectorAll(".modal").forEach((e=>{const o=e.querySelector(".modal-content")
o&&("dark"===t()?o.style.cssText="background-color: #212529 !important; color: #fff !important; opacity: 1 !important;":o.style.cssText="background-color: #fff !important; color: #212529 !important; opacity: 1 !important;")}))}),50),setTimeout((function(){o()}),200)}))}))}))
