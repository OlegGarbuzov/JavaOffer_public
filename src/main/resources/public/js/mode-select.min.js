document.addEventListener("DOMContentLoaded",(function(){function t(){const t="dark"===document.documentElement.getAttribute("data-theme")||"dark"===document.documentElement.getAttribute("data-bs-theme"),e=window.innerWidth>=769,n=document.querySelector(".mode-block.mode-rating.disabled#modeRatingDesktop")
if(n&&t&&e){n.style.pointerEvents="none",n.style.transform="scale(0.95)",n.style.transition="none",n.style.boxShadow="none",n.style.border="none",n.style.zIndex="0"
const t=n.querySelector(".login-container"),e=n.querySelector(".login-button")
if(t&&(t.style.pointerEvents="auto",t.style.zIndex="100",t.style.position="absolute",t.style.bottom="20px",t.style.left="0",t.style.right="0",t.style.textAlign="center",e)){const n=document.createElement("a")
n.href=e.href,n.className="btn btn-primary",n.textContent=e.textContent,n.style.fontWeight="600",n.style.padding="8px 16px",n.style.borderRadius="6px",n.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.2)",n.style.transition="all 0.3s ease",n.style.border="none",n.style.backgroundColor="#0d6efd",n.style.color="white",n.style.zIndex="101",n.style.position="relative",n.addEventListener("mouseover",(function(){this.style.transform="translateY(-2px)",this.style.boxShadow="0 6px 12px rgba(0, 0, 0, 0.3)",this.style.backgroundColor="#0b5ed7"})),n.addEventListener("mouseout",(function(){this.style.transform="",this.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.2)",this.style.backgroundColor="#0d6efd"})),t.innerHTML="",t.appendChild(n)}n.querySelectorAll("*:not(.login-container):not(.login-container *)").forEach((t=>{t.style.transition="none",t.style.transform="none"}))}}function e(t){n=!0
const e=document.getElementById("modeForm")
document.getElementById("examModeInput").value=t,e.action="/testing/process",e.method="post",e.submit()}let n=!1,o=null
document.getElementById("ratingRulesModal")&&(o=new bootstrap.Modal(document.getElementById("ratingRulesModal")),document.getElementById("ratingRulesModal").addEventListener("show.bs.modal",(function(){setTimeout((function(){document.querySelectorAll(".modal-backdrop").forEach((t=>{t.style.cssText="opacity: 0.5 !important; background-color: #000 !important;"}))
const t=document.querySelector("#ratingRulesModal .modal-content")
if(t){const e="dark"===document.documentElement.getAttribute("data-theme")||"dark"===document.documentElement.getAttribute("data-bs-theme")
t.style.cssText=e?"background-color: #212529 !important; color: #fff !important; opacity: 1 !important;":"background-color: #fff !important; color: #212529 !important; opacity: 1 !important;"}}),0),setTimeout((function(){document.querySelectorAll(".modal-backdrop").forEach((t=>{t.style.cssText="opacity: 0.5 !important; background-color: #000 !important;"}))
const t=document.querySelector("#ratingRulesModal .modal-content")
if(t){const e="dark"===document.documentElement.getAttribute("data-theme")||"dark"===document.documentElement.getAttribute("data-bs-theme")
t.style.cssText=e?"background-color: #212529 !important; color: #fff !important; opacity: 1 !important;":"background-color: #fff !important; color: #212529 !important; opacity: 1 !important;"}}),100)}))),t(),window.addEventListener("resize",t),new MutationObserver((function(e){e.forEach((function(e){"attributes"!==e.type||"data-theme"!==e.attributeName&&"data-bs-theme"!==e.attributeName||t()}))})).observe(document.documentElement,{attributes:!0}),document.querySelectorAll(".mode-block.mode-rating.disabled, .mobile-card.disabled#mobileCardRating").forEach((t=>{t.style.boxShadow="none",t.style.transform="scale(0.95)",t.style.zIndex="0",t.style.border="none",t.style.outline="none"
const e=t.querySelector(".login-button")
e&&(e.style.zIndex="30",e.style.position="relative",e.style.color="white",e.style.opacity="1")}))
const a=document.getElementById("acceptRulesButton")
a&&a.addEventListener("click",(function(){o.hide(),e("RATING")}))
const l=document.getElementById("modeFree"),r=document.getElementById("modeRatingDesktop")
if(l&&l.addEventListener("click",(function(){e("FREE")})),r&&!r.classList.contains("disabled")&&r.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),o?o.show():e("RATING")})),window.innerWidth<768){const s=document.getElementById("mobileCards"),d=document.getElementById("mobileCardFree"),c=document.getElementById("mobileCardRating"),u=document.querySelectorAll(".mobile-indicator")
let m=0
function i(){s.style.transform=`translateX(-${50*m}%)`,u.forEach(((t,e)=>{e===m?t.classList.add("active"):t.classList.remove("active")})),document.getElementById("examModeInput").value=0===m?"FREE":"RATING"}d&&d.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),n||(n=!0,e("FREE"))})),c&&!c.classList.contains("disabled")&&c.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),n||(o?o.show():(n=!0,e("RATING")))})),u.forEach((function(t,e){t.addEventListener("click",(function(t){n||(t.preventDefault(),t.stopPropagation(),m=e,i())}))}))
let y=null,p=null
s.addEventListener("touchstart",(function(t){n||(y=t.touches[0].clientX,p=y)}),{passive:!1}),s.addEventListener("touchmove",(function(t){n||t.touches.length>0&&(p=t.touches[0].clientX)}),{passive:!1}),s.addEventListener("touchend",(function(t){if(n||null===y||null===p)return
const e=y-p
Math.abs(e)>50&&(e>0&&0===m?(m=1,i()):e<0&&1===m&&(m=0,i())),y=null,p=null}),{passive:!1}),i()}}))
